#!/usr/bin/env ruby

lib = File.expand_path(File.dirname(__FILE__) + '/../lib')
$LOAD_PATH.unshift(lib) if File.directory?(lib) && !$LOAD_PATH.include?(lib)

require 'gploy'

gploy = Gploy::Configure.new

def validate_command(command)
  commands = %w[-version help deploy:setup deploy:tasks]
  unless commands.include?(command)
    raise ArgumentError, "invalid command. Valid commands are #{commands}."
  end
end

puts "------ GPLOY ------"

args = ARGV.dup
ARGV.clear
command = args.shift.strip

validate_command(command)  

if command == "-version"
  puts  Gploy::VERSION
  exit
elsif command.empty?
  puts "Help"
end

gploy.run(command)
